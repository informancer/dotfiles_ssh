#!/usr/bin/env bash
# -*- sh -*-

usage() { echo "Usage: $(basename $0) <user> <hostname>" 1>&2; }

if [ $# -ne 2 ]; then
    usage;
    exit 64;
fi

user=$1
host=$2

echo create a new key for $user@$host

confdir="$HOME/.ssh/config.d"
echo ${confdir}
mkdir -p ${confdir}

confname="${confdir}/${user}@${host}.config"
echo $confname
cat <<EOF > $confname
Match User ${user} Host ${host}
  IdentityFile ~/.ssh/${user}@${host}
EOF
